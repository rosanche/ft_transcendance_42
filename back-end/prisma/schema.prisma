// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement()) 
  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt

  email String @unique
  hash String?
  pseudo String @unique
  
  isTwoFactorAuthenticationEnabled Boolean @default(false)
  twoFactorAuthenticationSecret String? 

  firstName String?
  lastName String?
  profileImage String?

  legend String?

  nbr_games Int @default(0)
  nbr_wins  Int @default(0)
  nbr_looses  Int @default(0)
  
  goals_f Int @default(0)
  goals_a Int @default(0)

  experience Int @default(0)
  level Int @default(0)

  dem_friendBy User[] @relation("dem_friend")
  myDem_friend  User[] @relation("dem_friend")
  
  friendBy User[] @relation("acce_friend")
  myfriends  User[] @relation("acce_friend")

  channel_creat Channel[] @relation("channelcreat")
  admin_channel Channel[] @relation("channeladmin")
  User_channel Channel[] @relation("channeluser")

  mypost  Post[] @relation("mypost")
  
  @@map("user")
}

model Game {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt

  score_1 Int @default(0)
  id_1 Int
  id_2 Int
  @@map("game")
  score_2 Int @default(0)
  winner Int
}

model Channel {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt
  createur User[] @relation("channelcreat")
  
  name String @unique()
  hash String?
  private Boolean

  admin User[] @relation("channeladmin")
  users User[] @relation("channeluser")

  post Post[] @relation("channelpost")
  @@map("channel")
}

model Post {
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt
  
  createur User[] @relation("mypost")
  dest Channel[] @relation("channelpost")
  mesage String
  @@map("post")
}
